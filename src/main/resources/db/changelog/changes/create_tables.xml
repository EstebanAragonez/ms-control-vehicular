<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd">

    <!-- Tabla rol -->
    <changeSet id="1" author="Leonardo Aragonez">
        <createTable tableName="rol">
            <column name="id_rol" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nombre_rol" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Tabla usuario (corregido tipo de id_rol y nombre de columna) -->
    <changeSet id="2" author="Leonardo Aragonez">
        <createTable tableName="usuario">
            <column name="id_usuario" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nombre" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="contrasena" type="varchar(255)"> <!-- Corregido nombre -->
                <constraints nullable="false"/>
            </column>
            <column name="id_rol" type="bigint"> <!-- Corregido tipo -->
                <constraints nullable="false"
                             foreignKeyName="fk_usuario_rol"
                             references="rol(id_rol)"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Tabla vehiculo (corregido tipo de id_usuario) -->
    <changeSet id="3" author="Leonardo Aragonez">
        <createTable tableName="vehiculo">
            <column name="id_vehiculo" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="placa" type="varchar(10)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="tipo" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="marca" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="modelo" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="fecha_venc_soat" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="fecha_venc_tecnomecanica" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="color" type="varchar(30)">
                <constraints nullable="false"/>
            </column>
            <column name="id_usuario" type="bigint"> <!-- Corregido tipo -->
                <constraints nullable="false"
                             foreignKeyName="fk_vehiculo_usuario"
                             references="usuario(id_usuario)"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Tabla registro_ingreso (corregido tipo de id_vehiculo) -->
    <changeSet id="4" author="Leonardo Aragonez">
        <createTable tableName="registro_ingreso">
            <column name="id_registro" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="id_vehiculo" type="bigint"> <!-- Corregido tipo -->
                <constraints nullable="false"
                             foreignKeyName="fk_registro_vehiculo"
                             references="vehiculo(id_vehiculo)"/>
            </column>
            <column name="fecha_hora_entrada" type="timestamptz">
                <constraints nullable="false"/>
            </column>
            <column name="fecha_hora_salida" type="timestamptz"/>
            <column name="observaciones" type="text"/>
        </createTable>
    </changeSet>
</databaseChangeLog>