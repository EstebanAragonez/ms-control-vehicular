<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd">

    <!-- Tabla rol -->
    <changeSet id="1" author="Leonardo Aragonez">
        <createTable tableName="rol">
            <column name="id_rol" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name_rol" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Tabla usuario (corregido tipo de id_rol y nombre de columna) -->
    <changeSet id="2" author="Leonardo Aragonez">
        <createTable tableName="users">
            <column name="id_user" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="last_name" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="cedula" type="varchar(20)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="email" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="password" type="varchar(255)"> <!-- Corregido nombre -->
                <constraints nullable="false"/>
            </column>
            <column name="id_rol" type="bigint"> <!-- Corregido tipo -->
                <constraints nullable="false"
                             foreignKeyName="fk_user_rol"
                             references="rol(id_rol)"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Tabla vehiculo (corregido tipo de id_usuario) -->
    <changeSet id="3" author="Leonardo Aragonez">
        <createTable tableName="vehicle">
            <column name="id_vehicle" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="plate" type="varchar(10)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="type" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="trademark" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="model" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="soat_expi_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="tech_mecha_expi_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="color" type="varchar(30)">
                <constraints nullable="false"/>
            </column>
            <column name="id_user" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_vehicle_user"
                             references="users(id_user)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="4" author="Leonardo Aragonez">
        <createTable tableName="entry_registration">
            <column name="id_registration" type="bigserial">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="id_vehicle" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_record_vehicle"
                             references="vehicle(id_vehicle)"/>
            </column>
            <column name="date_time_entry" type="timestamptz">
                <constraints nullable="false"/>
            </column>
            <column name="date_time_departure" type="timestamptz"/>
            <column name="observations" type="text"/>
        </createTable>
    </changeSet>
</databaseChangeLog>